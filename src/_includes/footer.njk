<footer class="mx-auto max-w-7xl px-6 lg:px-8 mt-24 w-full sm:mt-32 lg:mt-40 dark:bg-gray-900">
  <div class="mx-auto max-w-2xl lg:max-w-none">
    <div>
      <div class="grid grid-cols-1 gap-x-8 gap-y-16 lg:grid-cols-2">
        <nav>
          <ul role="list" class="grid grid-cols-2 gap-8 sm:grid-cols-3">
            {% for menu in nav.menus %}
              {% if menu.submenus %}
                <li>
                  <div class="font-display text-sm font-semibold tracking-wider dark:text-gray-100 text-gray-900">{{ menu.name }}</div>
                  <ul role="list" class="mt-4 text-sm text-gray-700 dark:text-gray-300">
                    {% for submenu in menu.submenus %}
                      <li class="mt-4">
                        <a class="transition dark:hover:text-gray-100 hover:text-gray-900" href="{{ submenu.route }}">{{ submenu.name }}</a>
                      </li>
                    {% endfor %}
                  </ul>
                </li>
              {% endif %}
            {% endfor %}
          </ul>
        </nav>
        <div class="flex lg:justify-end max-w-sm" x-data="dataCta">
          <div class="mt-5 sm:mt-8 sm:flex sm:flex-col sm:items-center sm:justify-center lg:block" >
            <h3
                class="text-sm font-semibold text-indigo-500 tracking-wider uppercase"
            >
                Interested in donating?
            </h3>
            <p class="mt-1 text-base text-gray-500 dark:text-gray-400">
                Support our cause: Your generosity will significantly boost our efforts.
            </p>
            <div class="mt-8 flex lg:mt-4 lg:flex-shrink-0 ">
              <div x-data="{symbol: '$'}">
                <label for="amount" class="text-sm font-medium text-gray-700 hidden">
            Amount
          </label>
                <div class="relative">
                  <div class=" absolute -inset-0.5 bg-gray-200 dark:bg-gray-700 rounded-md blur"></div>
                  {# <div class=" absolute inset-y-0 left-0 ml-3 pl-2 flex items-center pointer-events-none ">
              <span class="text-gray-500 text-base font-medium" x-text="symbol"></span>
            </div> #}
                  <input
              x-model.number="amount"
              type="text"
              name="amount"
              id="amount"
              class="relative dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 mx-1 inline-flex items-center justify-center px-4 py-3
                border text-base font-medium rounded-md text-indigo-600 bg-white hover:bg-indigo-50 border-gray-300 "
              placeholder="0.00"/>
                  <div class="absolute inset-y-0 right-0 flex items-center">
                    <label for="currency" class="sr-only">Currency</label>
                    <select
                x-model="currency"
                @change="symbol = document.querySelector(`#${event.target.id} option:checked`).dataset.symbol"
                id="currency"
                name="currency"
                class=" focus:ring-indigo-500 focus:border-indigo-500 h-full py-0 pl-2 pr-7 border-transparent bg-transparent
                  text-gray-500 text-base font-medium rounded-md ">
                      <option data-symbol="$" data-placeholder="0.00">USD</option>
                      <option data-symbol="€" data-placeholder="0.00">EUR</option>
                      <option data-symbol="£" data-placeholder="0.00">GBP</option>
                      <option data-symbol="¥" data-placeholder="0.00">JPY</option>
                      <option data-symbol="$" data-placeholder="0.00">CAD</option>
                      <option data-symbol="$" data-placeholder="0.00">AUD</option>
                      <option data-symbol="F" data-placeholder="0.00">CHF</option>
                      <option data-symbol="₹" data-placeholder="0.00">INR</option>
                      <option data-symbol="元" data-placeholder="0.00">CNY</option>
                      <option data-symbol="R" data-placeholder="0.00">BRL</option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="inline-flex rounded-md shadow relative ml-3 ">
                <div class=" absolute -inset-0.5 bg-indigo-600 dark:bg-indigo-500 rounded-md blur"></div>
                <button :disabled="parseFloat(amount) < 3"
            @click="pay"
            id="donate-button"
            class="relative inline-flex items-center justify-center px-5 py-3 border border-indigo-500 text-base font-medium rounded-md
              text-white bg-indigo-600 hover:bg-indigo-700">
                  <span x-show="!isFetching" id="pay-button">Pay</span>
                  <div x-show="isFetching" id="wait-button" class="inline-flex items-center">
                    <svg
              class="animate-spin h-5 w-5 text-white"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24">
                      <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                      <path
                class="opacity-75"
                fill="currentColor"
                d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                  </div>
                  <!-- </template> -->
                </button>
              </div>
            </div>
          </div>
          {# <form class="max-w-sm">
            <h2 class="font-display text-sm font-semibold tracking-wider text-gray-900">Sign up for our newsletter</h2>
            <p class="mt-4 text-sm text-gray-700">Subscribe to get the latest design news, articles, resources and inspiration.</p>
            <div class="relative mt-6">
              <input type="email" placeholder="Email address" autocomplete="email" aria-label="Email address" class="block w-full rounded-2xl border border-gray-300 bg-transparent py-4 pl-6 pr-20 text-base/6 text-gray-900 ring-4 ring-transparent transition placeholder:text-gray-500 focus:border-gray-900 focus:outline-none focus:ring-gray-900/5">
              <div class="absolute inset-y-1 right-1 flex justify-end">
                <button type="submit" aria-label="Submit" class="flex aspect-square h-full items-center justify-center rounded-xl bg-gray-900 text-white transition hover:bg-gray-800">
                  <svg viewBox="0 0 16 6" aria-hidden="true" class="w-4">
                    <path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M16 3 10 .5v2H0v1h10v2L16 3Z"></path>
                  </svg>
                </button>
              </div>
            </div>
          </form> #}
        </div>
      </div>
      <div x-data="{ year: new Date().getFullYear() }" class="mb-20 mt-24 flex flex-col sm:flex-row items-center justify-between gap-x-6 gap-y-4 border-t dark:border-gray-100/10 border-gray-900/10 pt-12">
        <a aria-label="Home" href="/" class="inline-flex items-center gap-x-3">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-auto stroke-current text-indigo-500 sm:h-10" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <title>Landing Page</title>
            <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0
                            00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0
                            00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"/>
          </svg>
          <div class="flex flex-col justify-center">
            <span class="dark:text-gray-100 text-gray-900">Cracking Da Code</span>
            <span class="dark:text-gray-400 text-gray-600">Tunes Decoded, Delirium Guaranteed</span>
          </div>
        </a>
        <div class="mt-2 flex justify-center space-x-3 text-gray-500 dark:text-gray-400">
          <a href="https://github.com/nsursock" class="hover:animate-wiggle">
            <svg class="fill-current" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
              <title>GitHub Reps</title>
              <path
                d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-4.466
              19.59c-.405.078-.534-.171-.534-.384v-2.195c0-.747-.262-1.233-.55-1.481 1.782-.198 3.654-.875 3.654-3.947
              0-.874-.312-1.588-.823-2.147.082-.202.356-1.016-.079-2.117 0
              0-.671-.215-2.198.82-.64-.18-1.324-.267-2.004-.271-.68.003-1.364.091-2.003.269-1.528-1.035-2.2-.82-2.2-.82-.434 1.102-.16
              1.915-.077 2.118-.512.56-.824 1.273-.824 2.147 0 3.064 1.867 3.751 3.645 3.954-.229.2-.436.552-.508
              1.07-.457.204-1.614.557-2.328-.666 0 0-.423-.768-1.227-.825 0 0-.78-.01-.055.487 0 0 .525.246.889 1.17 0 0 .463 1.428
              2.688.944v1.489c0 .211-.129.459-.528.385-3.18-1.057-5.472-4.056-5.472-7.59 0-4.419 3.582-8 8-8s8 3.581 8 8c0 3.533-2.289
              6.531-5.466 7.59z"
/>
            </svg>
          </a>
          <a href="https://www.facebook.com/nicolasj.sursock" class="hover:animate-wiggle">
            <svg class="fill-current" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
              <title>Facebook Profile</title>
              <path
                d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-3
              7h-1.924c-.615 0-1.076.252-1.076.889v1.111h3l-.238 3h-2.762v8h-3v-8h-2v-3h2v-1.923c0-2.022 1.064-3.077
              3.461-3.077h2.539v3z"
/>
            </svg>
          </a>
          <a href="https://twitter.com/SursockNicolas" class="hover:animate-wiggle">
            <svg class="fill-current" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
              <title>Twitter Handle</title>
              <path
                d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-.139 9.237c.209
              4.617-3.234 9.765-9.33 9.765-1.854 0-3.579-.543-5.032-1.475 1.742.205 3.48-.278
              4.86-1.359-1.437-.027-2.649-.976-3.066-2.28.515.098 1.021.069
              1.482-.056-1.579-.317-2.668-1.739-2.633-3.26.442.246.949.394 1.486.411-1.461-.977-1.875-2.907-1.016-4.383 1.619 1.986
              4.038 3.293 6.766 3.43-.479-2.053 1.08-4.03 3.199-4.03.943 0 1.797.398 2.395 1.037.748-.147 1.451-.42
              2.086-.796-.246.767-.766 1.41-1.443 1.816.664-.08 1.297-.256 1.885-.517-.439.656-.996 1.234-1.639 1.697z"
/>
            </svg>
          </a>
          <a href="https://www.instagram.com/nsursock/" class="hover:animate-wiggle">
            <svg class="fill-current" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
              <title>Instagram Page</title>
              <path
                d="M15.233 5.488c-.843-.038-1.097-.046-3.233-.046s-2.389.008-3.232.046c-2.17.099-3.181 1.127-3.279 3.279-.039.844-.048
              1.097-.048 3.233s.009 2.389.047 3.233c.099 2.148 1.106 3.18 3.279 3.279.843.038 1.097.047 3.233.047 2.137 0 2.39-.008
              3.233-.046 2.17-.099 3.18-1.129
              3.279-3.279.038-.844.046-1.097.046-3.233s-.008-2.389-.046-3.232c-.099-2.153-1.111-3.182-3.279-3.281zm-3.233 10.62c-2.269
              0-4.108-1.839-4.108-4.108 0-2.269 1.84-4.108 4.108-4.108s4.108 1.839 4.108 4.108c0 2.269-1.839 4.108-4.108
              4.108zm4.271-7.418c-.53 0-.96-.43-.96-.96s.43-.96.96-.96.96.43.96.96-.43.96-.96.96zm-1.604 3.31c0 1.473-1.194 2.667-2.667
              2.667s-2.667-1.194-2.667-2.667c0-1.473 1.194-2.667 2.667-2.667s2.667 1.194 2.667 2.667zm4.333-12h-14c-2.761 0-5 2.239-5
              5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm.952 15.298c-.132 2.909-1.751 4.521-4.653
              4.654-.854.039-1.126.048-3.299.048s-2.444-.009-3.298-.048c-2.908-.133-4.52-1.748-4.654-4.654-.039-.853-.048-1.125-.048-3.298
              0-2.172.009-2.445.048-3.298.134-2.908 1.748-4.521 4.654-4.653.854-.04 1.125-.049 3.298-.049s2.445.009 3.299.048c2.908.133
              4.523 1.751 4.653 4.653.039.854.048 1.127.048 3.299 0 2.173-.009 2.445-.048 3.298z"
/>
            </svg>
          </a>
          <a href="https://www.pinterest.fr/nicolasjsk/_created" class="hover:animate-wiggle">
            <svg class="fill-current" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
              <title>Pinterest Profile</title>
              <path
                d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-7 20c-.825
              0-1.62-.125-2.369-.357.326-.531.813-1.402.994-2.098l.499-1.901c.261.498 1.023.918 1.833.918 2.414 0 4.152-2.219
              4.152-4.976 0-2.643-2.157-4.62-4.933-4.62-3.452 0-5.286 2.317-5.286 4.841 0 1.174.625 2.634 1.624
              3.1.151.07.232.039.268-.107l.222-.907c.019-.081.01-.15-.056-.23-.331-.4-.595-1.138-.595-1.825 0-1.765 1.336-3.472
              3.612-3.472 1.965 0 3.341 1.339 3.341 3.255 0 2.164-1.093 3.663-2.515 3.663-.786
              0-1.374-.649-1.185-1.446.226-.951.663-1.977.663-2.664 0-.614-.33-1.127-1.012-1.127-.803 0-1.448.831-1.448 1.943 0
              .709.239 1.188.239 1.188s-.793 3.353-.938 3.977c-.161.691-.098 1.662-.028 2.294-2.974-1.165-5.082-4.06-5.082-7.449
              0-4.418 3.582-8 8-8s8 3.582 8 8-3.582 8-8 8z"
/>
            </svg>
          </a>
          <a href="https://www.linkedin.com/in/nicolas-sursock" class="hover:animate-wiggle">
            <svg class="fill-current" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
              <title>LinkedIn Page</title>
              <path
                d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11
              19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75
              1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"
/>
            </svg>
          </a>
          <a href="https://open.spotify.com/user/1137656838?si=73dd738fb9ff45a6" class="hover:animate-wiggle">
            <svg class="fill-current" width="24" height="24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd">
              <title>Spotify Profile</title>
              <path
                d="M19 0c2.762 0 5 2.239 5 5v14c0 2.761-2.238 5-5 5h-14c-2.761 0-5-2.239-5-5v-14c0-2.761 2.239-5 5-5h14zm-7 4c-4.418 0-8
              3.582-8 8 0 4.419 3.582 8 8 8s8-3.581 8-8c0-4.418-3.582-8-8-8zm3.669
              11.539c-.144.236-.451.31-.686.166-1.878-1.148-4.243-1.408-7.028-.772-.268.062-.535-.106-.597-.375-.061-.268.106-.535.375-.596
              3.048-.697 5.662-.397
              7.771.891.235.144.309.451.165.686zm.979-2.178c-.181.293-.565.385-.858.205-2.15-1.322-5.428-1.704-7.972-.932-.33.099-.678-.087-.778-.416-.1-.33.086-.677.416-.778
              2.905-.881 6.517-.454 8.987
              1.063.293.181.385.565.205.858zm.084-2.269c-2.578-1.531-6.832-1.672-9.294-.925-.395.12-.813-.103-.933-.498-.12-.396.103-.814.499-.934
              2.826-.858 7.523-.692 10.492 1.07.356.211.472.671.262 1.026-.211.355-.671.472-1.026.261z"
/>
            </svg>
          </a>
          <a href="https://soundcloud.com/nalman" class="hover:animate-wiggle">
            <svg class="fill-current" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
              <title>SoundCloud Artist's Page</title>
              <path
                d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-14.333
              15.524c-.405-.365-.667-.903-.667-1.512 0-.608.262-1.146.667-1.512v3.024zm1.333.476c-.243
              0-.369.003-.667-.092v-3.792c.316-.101.465-.097.667-.081v3.965zm1.333
              0h-.666v-3.778l.206.121c.091-.375.253-.718.461-1.023v4.68zm1.334 0h-.667v-5.378c.206-.154.426-.286.667-.377v5.755zm1.333
              0h-.667v-5.905c.251-.027.328-.046.667.006v5.899zm1.333 0h-.667v-5.7l.253.123c.119-.207.261-.395.414-.572v6.149zm6.727
              0h-6.06v-6.748c.532-.366 1.16-.585 1.842-.585 1.809 0 3.275 1.494 3.41 3.386 1.303-.638 2.748.387 2.748 1.876 0
              1.143-.869 2.071-1.94 2.071z"
/>
            </svg>
          </a>
        </div>
        <p class="text-sm dark:text-gray-300 text-gray-700">© Sursock Labs <!-- -->
          <span x-text="year"></span></p>
      </div>
    </div>
  </div>
</footer>

<!-- Global notification live region, render this permanently at the end of the document -->
<div x-data="{ openCookieNotif: false, openCompleteProfile: false }" 
    x-init="() => { setTimeout(() => openCookieNotif = true, 500); setTimeout(() => openCompleteProfile = true, 3000); }"
   aria-live="assertive" class="pointer-events-none fixed inset-0 z-[100] flex items-end px-4 py-6 sm:items-start sm:p-6">
  <div class="flex w-full flex-col items-center space-y-4 sm:items-end">
    {# {% if page
      .url
      .includes('/blog') %}
      {% include './partials/notification-posts.njk' %}
    {% endif %} #}
    {# {% include './partials/notifications.njk' %} #}
    {# {% if page.url == '/' %} #}
    {% include 'partials/notifications/privacy.njk' %}
    {# {% endif %} #}
  </div>
</div>

<script>
  function loadScript(src) {
    return new Promise(function (resolve, reject) {
      var s
      s = document.createElement('script')
      s.src = src
      s.onload = resolve
      s.onerror = reject
      if (document.body == null) {
        document
          .head
          .appendChild(s)
      } else {
        document
          .body
          .appendChild(s)
      }
    })
  }
  function dataCta() {
    return {
      isFetching: false,
      amount: '0.00', //(Math.random() * 100).toFixed(2),
      currency: 'USD',
      stripe: null,
      async pay() {
        //        this.registerEvent('donate', 'click')

        await loadScript('https://js.stripe.com/v3')
        this.stripe = Stripe('{{ env.stripeKey }}')
        var purchase = {
          amount: this.amount,
          currency: this.currency,
          domain: window.location.origin
        }
        this.isFetching = true
        fetch('/api/payment', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(purchase)
        })
          .then((response) => response.json())
          .then((session) => {
            this
              .stripe
              .redirectToCheckout({ sessionId: session.id })
          })
          .then(function (result) {
            if (result.error) {
              console.error('Error:', result.error.message)
            }
          })
          .catch(function (error) {
            console.error('Error:', error)
          })
        }
    }
  }
</script>